<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<canvas id="spritewerk"></canvas>
	<script src="../dist/spritewerk-game.js"></script>
	<script>
		var GameScene = function(options) {
			SW.Scene.call(this, options);

			this.getLayers().addItem('mainLayer', new SW.Collection());

			this.mainLayer = this.getLayers().getItem('mainLayer');
			this.mainLayer.addItem(
				'rect', new SW.Rectangle().setDimensions(100, 100).setDraggable(true)
			);
		};
		GameScene.prototype = SW.Util.clone(SW.Scene.prototype);
		GameScene.prototype.press = function(e) {
			console.log(e.target);
		};

		var canvas;
		var draw;
		var input;

		function onWindowLoad() {
			SW.Signal.removeListener(window, 'load', onWindowLoad);

			canvas = new SW.Canvas({
				id: 'spritewerk'
			});

			draw = new SW.Draw({
				canvas: canvas.getCanvasEl()
			});

			input = new SW.Input({
				eventEl: canvas.getCanvasEl(),
				bindMouseInput: true
			});

			SW.SceneManager.addScene('gameScene', GameScene);

			function render() {
				draw.clearAll();
				
				SW.SceneManager.getActiveScene().getLayers().each(function(layer) {
					layer.each(function(entity) {
						draw.render(entity);
					});
				});

				requestAnimationFrame(render);
			}

			requestAnimationFrame(render);
		}

		SW.Signal.addListener(window, 'load', onWindowLoad);
	</script>
</body>
</html>