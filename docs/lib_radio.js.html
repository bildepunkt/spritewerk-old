<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: lib/radio.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: lib/radio.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// CustomEvent polyfill
CustomEvent = window.CustomEvent ||
function( event, params ) {
    params = params || { bubbles: false, cancelable: false, detail: undefined };
    var evt = document.createEvent( 'CustomEvent' );
    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
    return evt;
};
CustomEvent.prototype = window.Event.prototype;

// Bind polyfill
if (!Function.prototype.bind) {
  Function.prototype.bind = function (oThis) {
    if (typeof this !== "function") {
      // closest thing possible to the ECMAScript 5 internal IsCallable function
      throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
    }

    var aArgs = Array.prototype.slice.call(arguments, 1), 
        fToBind = this, 
        fNOP = function () {},
        fBound = function () {
          return fToBind.apply(this instanceof fNOP &amp;&amp; oThis
                                ? this
                                : oThis,
                                aArgs.concat(Array.prototype.slice.call(arguments)));
        };

    fNOP.prototype = this.prototype;
    fBound.prototype = new fNOP();

    return fBound;
  };
}

(function() {
'use strict';

/** private */
var _compliant = 'addEventListener' in window,
    _mediator = document.createElement('div'),
    _body = document.getElementsByTagName('body')[0],
    _handlerManager = {};

_mediator.id = 'radio-mediator';
_body.appendChild(_mediator);

/**
 *
 */
function _tuneIn(el, type, handler) {
    if (_compliant) {
        el.addEventListener(type, handler, false);
    } else {
        el.attachEvent(type, handler);
    }
}

/**
 *
 */
function _tuneOut(el, type, handler) {
    if (_compliant) {
        el.removeEventListener(type, handler, false);
    } else {
        el.detachEvent(type, handler);
    }
}

/**
 *
 */
function _broadcast(el, type, data) {
    var windowType,
        customEvent;

        if (_compliant) {
            customEvent = new CustomEvent(type, {
                detail : data
            });
            el.dispatchEvent(customEvent);
        } else {
            windowType = 'on' + type;
            el.fireEvent(windowType);
        }
}

/**
 *
 */
function _getEl(selector) {
    var el;

    if (/^\..+$/.test(selector)) {
        el = document.getElementsByClassName(selector.split('.')[1]);
    } else if (/^\#.+$/.test(selector)) {
        el = document.getElementById(selector.split('#')[1]);
    } else if (selector === 'window') {
        el = window;
    } else if (selector === 'document') {
        el = document;
    } else {
        el = document.getElementsByTagName(selector);
    }

    return el;
}

/** public */

/**
 * event handler
 *
 * @class SW.Radio
 * @belongsto SW
 */
var radio = {
    /**
     * tune in to events from a dom element or built-in mediator
     *
     * @method SW.Radio.prototype.tuneIn
     * @param {HTMLElement} [el] - the element to listen to (if not present, will listen to built-in mediator)
     * @param {string} type - event type; can be custom or DOM
     * @param {function} handler - the event handler
     * @param {object} [context] - if present will call handler with this scope
     */
    tuneIn: function(el, type, handler, context) {
        var handlers;
        // no element, shift args over
        if (typeof(el) === 'string' &amp;&amp; typeof(type) === 'function') {
            context = handler ? handler : null;
            handler = type;
            type = el;
            el = _mediator;
        }

        if (typeof(el) === 'string') {
            el = _getEl(el);
        }

        if (context) {
            if (!_handlerManager[type]) {
                _handlerManager[type] = [];
            }

            handlers = {
                handler: handler,
                boundHandler: handler.bind(context)
            };

            _handlerManager[type].push(handlers);
        }

        if (el.hasOwnProperty('length') &amp;&amp; el.length > 0) {
            for (var i = 0; i &lt; el.length; i += 1) {
                _tuneIn(el[i], type, handlers ? handlers.boundHandler : handler);
            }    
        } else {
            _tuneIn(el, type, handlers ? handlers.boundHandler : handler);
        }
    },

    /**
     * tune out events from a dom element or built-in mediator
     *
     * @method SW.Radio.prototype.tuneOut
     * @param {HTMLElement} [el] - the element to stop listening to (if not present, will tune out the built-in mediator)
     * @param {string} type - event type; can be custom or DOM
     * @param {function} handler - the event handler
     */
    tuneOut: function(el, type, handler) {
        // no element, shift args over
        if (typeof(el) === 'string' &amp;&amp; typeof(type) === 'function') {
            handler = type;
            type = el;
            el = _mediator;
        }

        if (typeof(el) === 'string') {
            el = _getEl(el);
        }

        // if handler matches object of handler &amp; boundHandler - assign boundHandler to handler; else leave as is
        if (_handlerManager[type]) {
            for (var i = 0; i &lt; _handlerManager[type].length; i += 1) {
                if (handler === _handlerManager[type][i].handler) {
                    handler = _handlerManager[type][i].boundHandler;
                    _handlerManager[type].splice(i, 1);
                    break;
                }
            }
        }

        if (el.hasOwnProperty('length') &amp;&amp; el.length > 0) {
            for (var i = 0; i &lt; el.length; i += 1) {
                _tuneOut(el[i], type, handler);
            }    
        } else {
            _tuneOut(el, type, handler);
        }
    },

    /**
     * broadcast events from a dom element or built-in mediator
     *
     * @method SW.Radio.prototype.broadcast
     * @param {HTMLElement} [el] - the element to broadcast from (if not present, will broadcast from built-in mediator)
     * @param {string} type - event type
     * @param {object} data - the data to pass to the handler
     */
    broadcast: function(el, type, data) {
        // no element, shift args over
        if (typeof(el) === 'string' &amp;&amp; typeof(type) !== 'string') {
            data = type;
            type = el;
            el = _mediator;
        }

        if (typeof(el) === 'string') {
            el = _getEl(el);
        }

        if (el.hasOwnProperty('length') &amp;&amp; el.length > 0) {
            for (var i = 0; i &lt; el.length; i += 1) {
                _broadcast(el[i], type, data);
            }    
        } else {
            _broadcast(el, type, data);
        }
    },

    destroy: function() {
        // remove mediator el, ?
    }
};

try {
    module.exports = radio;
} catch(e) {
    try {
        define([], radio);
    } catch(e) {
        window.radio = radio;
    }
}

}());
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="SW._Preloader.html">_Preloader</a></li><li><a href="SW.Base.html">Base</a></li><li><a href="SW.Canvas.html">Canvas</a></li><li><a href="SW.Collection.html">Collection</a></li><li><a href="SW.Config.html">Config</a></li><li><a href="SW.Dom.html">Dom</a></li><li><a href="SW.Input.html">Input</a></li><li><a href="SW.MediaManager.html">MediaManager</a></li><li><a href="SW.Movable.html">Movable</a></li><li><a href="SW.Radio.html">Radio</a></li><li><a href="SW.Renderable.html">Renderable</a></li><li><a href="SW.Unique.html">Unique</a></li><li><a href="SW.Util.html">Util</a></li></ul><h3>Events</h3><ul><li><a href="SW.Radio.html#event:dblpress">dblpress</a></li><li><a href="SW.Radio.html#event:preload/complete">preload/complete</a></li><li><a href="SW.Radio.html#event:preload/update">preload/update</a></li><li><a href="SW.Radio.html#event:press">press</a></li><li><a href="SW.Radio.html#event:pressdown">pressdown</a></li><li><a href="SW.Radio.html#event:pressup">pressup</a></li><li><a href="SW.Radio.html#event:screen/resize">screen/resize</a></li><li><a href="SW.Radio.html#event:spritewerk/ready">spritewerk/ready</a></li></ul><h3>Namespaces</h3><ul><li><a href="SW.html">SW</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta1</a> on Wed Feb 25 2015 22:08:30 GMT-0800 (PST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
