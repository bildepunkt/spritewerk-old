<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: layer.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: layer.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * an object in a state containing entities and config data
 *
 * @class Layer
 */
define([
    '../lib/protos'
], function(Protos) {
    return Protos.extend({
        protosName: 'layer',

        /**
         * @member {array} Layer.prototype.entities
         */
        entities: [],

        /**
         * factor to determine parallax based on camera offsets
         *
         * @member {integer} Layer.prototype.scrollDepth
         * @default {integer} 1
         */
        scrollDepth: 1,

        /**
         * @method Layer.prototype.getEntity
         * @param {string} name
         */
        getEntity: function(name) {
            var len = this.entities.length;
            var i;

            for(i = 0; i &lt; len; i += 1) {
                if (this.entities[i].name == name) {
                    return this.entities[i];
                }
            }
        },

        /**
         * @param {Sprite} entity
         * @method Layer.prototype.addEntity
         */
        addEntity: function(entityData) {
            var entity = new entityData.type(entityData.config);
            entity.name = entityData.name;

            if (entity.src) {
                entity.attachImage();
            }

            this.entities.push(entity);
        },

        /**
         * @param {object} layer
         * @param {Sprite} entity
         * @method Layer.prototype.removeEntity
         */
        removeEntity: function(entity) {
            var len = this.entities.length;
            var i;

            for (i = 0; i &lt; len; i += 1) {
                if (entity._uid === this.entities[i]._uid) {
                    this.entities[i] = null;
                    this.entities.splice(i, 1);
                    break;
                }
            }
        },

        /**
         * changes an entity's depth
         *
         * @param {Sprite} entity
         * @param {int|string} newDepth - int use: 0 for back, -1 for front, or anything inbetween. string use: '++' or '--' for forward or back respectively
         * @method Layer.prototype.setEntityDepth
         */
        setEntityDepth: function(entity, newDepth) {
            var entitiesLen = this.entities.length;
            var entityObject;
            var depth;
            var i;

            for (i = 0; i &lt; entitiesLen; i += 1) {
                if (this.entities[i]._uid === entity._uid) {
                    entityObject = this.entities[i];
                    depth = i;
                    break;
                }
            }

            if (newDepth === -1 &amp;&amp; depth === this.entities.length -1) {
                return;
            }

            if (newDepth === 0  &amp;&amp; depth === 0) {
                return;
            }

            this.entities.splice(depth, 1);

            switch(typeof newDepth) {
            case 'number':
                if (newDepth === -1 || newDepth >= this.entities.length) {
                    this.entities.push(entityObject);
                } else {
                    this.entities.splice(newDepth, 0, entityObject);
                }
                break;
            case 'string':
                if (newDepth === '++') {
                    this.entities.splice(depth + 1, 0, entityObject);
                } else if (newDepth === '--') {
                    this.entities.splice(depth - 1, 0, entityObject);
                }
                break;
            }
            
        },

        /**
         * @method Layer.prototype.getEntity
         * @param {Sprite} entity
         * @return {int} depth
         */
        getEntityDepth: function(entity) {
            var entitiesLen = this.entities.length;
            var i;

            for (i = 0; i &lt; entitiesLen; i += 1) {
                if (this.entities[i]._uid === entity._uid) {
                    return i;
                }
            }
        }
    });
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Camera.html">Camera</a></li><li><a href="Config.html">Config</a></li><li><a href="DomControl.html">DomControl</a></li><li><a href="Draw.html">Draw</a></li><li><a href="Engine.html">Engine</a></li><li><a href="Game.html">Game</a></li><li><a href="Input.html">Input</a></li><li><a href="Layer.html">Layer</a></li><li><a href="Shade.html">Shade</a></li><li><a href="Sprite.html">Sprite</a></li><li><a href="State.html">State</a></li><li><a href="StateControl.html">StateControl</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta1</a> on Sun Jan 25 2015 11:22:53 GMT-0800 (PST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
